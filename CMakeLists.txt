cmake_minimum_required(VERSION 2.8)
project(syslog-bulk-uploader)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Werror")
add_definitions(-std=c++11)
add_subdirectory(src)
add_subdirectory(test)
enable_testing()
add_test(NAME SyslogBulkUploaderTests COMMAND SyslogBulkUploaderTests)
add_test(NAME SyslogMessageTests COMMAND SyslogMessageTests)
add_test(NAME RFC3164FormattedSyslogMessageTests COMMAND RFC3164FormattedSyslogMessageTests)
add_test(NAME FrequencyLimitTests COMMAND FrequencyLimitTests)

set(VER_NAME "Syslog Bulk Uploader")
set(VER_MAJOR 1)
set(VER_MINOR 0)
set(VER_PATCH 0)
set(VER_PRERELEASE "alpha.1")
set(VER_BUILD "")

configure_file("src/config.h.in" "src/config.h")
